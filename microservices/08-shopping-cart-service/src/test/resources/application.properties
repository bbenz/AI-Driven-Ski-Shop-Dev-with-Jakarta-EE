# Test configuration overrides
quarkus.application.name=shopping-cart-service-test

# Testcontainers PostgreSQL - This will start a PostgreSQL container for tests
quarkus.datasource.devservices.enabled=true
quarkus.datasource.devservices.image-name=postgres:16

# Hibernate test configuration
quarkus.hibernate-orm.database.generation=drop-and-create
quarkus.hibernate-orm.sql-load-script=import.sql

# Flyway test configuration - Disable for tests since we use drop-and-create
quarkus.flyway.migrate-at-start=false

# Disable Redis for tests (use in-memory cache instead)
quarkus.redis.devservices.enabled=false
quarkus.cache.caffeine."shopping-cart-cache".initial-capacity=50
quarkus.cache.caffeine."shopping-cart-cache".maximum-size=1000

# Test Kafka configuration
quarkus.kafka.devservices.enabled=true

# Disable external service calls for tests
quarkus.rest-client.product-catalog-service.url=http://localhost:${quarkus.http.test-port:8081}
quarkus.rest-client.authentication-service.url=http://localhost:${quarkus.http.test-port:8081}
quarkus.rest-client.coupon-discount-service.url=http://localhost:${quarkus.http.test-port:8081}
quarkus.rest-client.loyalty-points-service.url=http://localhost:${quarkus.http.test-port:8081}

# Disable OIDC for tests
quarkus.oidc.devservices.enabled=false
quarkus.oidc.tenant-enabled=false

# Test HTTP configuration
quarkus.http.test-port=0

# Logging for tests
quarkus.log.level=INFO
quarkus.log.category."com.skishop.cart".level=DEBUG
